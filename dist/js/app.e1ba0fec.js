(function(t){function e(e){for(var s,n,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},1:function(t,e){},"1b08":function(t,e,a){a("ed18"),t.exports={URL:"http://localhost:3033/api/v1",URL_SOCKET:"http://localhost:3033/"}},"1faf":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAATCAYAAABGKffQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgBjZK9DcIwEIWfnQgElUfAG4QRMgJToHTQUoDJAlQUTAEbwAi0VMkIEQU0EGNHAvLjJPckFyd/z/Y9H0OHVvsk8DnOYMjuQ0w9AihMKQav940RQKuUa4SMCqpIpowK2oJRwR9MAQuYClr5voejjaYPtOJmTb6FBk5tYAGbR19KDSzWh2TTDj8xM9QV/+NVm6FIQ+0SkY9NkxpBaUfFc7ltwFRD5Qf7DI3Z6DI4p85lyE3+3AkvZcYfCGspCefJlRtGuYLmWRxJ9QGcB3WaDfaa6wAAAABJRU5ErkJggg=="},2123:function(t,e,a){"use strict";var s=a("d6c4"),i=a.n(s);i.a},"2cfd":function(t,e,a){"use strict";var s=a("e314"),i=a.n(s);i.a},"3c61":function(t,e,a){"use strict";var s=a("eae3"),i=a.n(s);i.a},"4af7":function(t,e,a){"use strict";var s=a("8453"),i=a.n(s);i.a},"4f44":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("d3b7"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],n=(a("034f"),a("2877")),o={},c=Object(n["a"])(o,i,r,!1,null,null,null),l=c.exports,u=(a("45fc"),a("8c4f")),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-3 col-md-3 friendlist d-none d-md-block"},[s("div",{staticClass:"container"},[s("b-row",[s("b-col",[s("router-link",{attrs:{to:"/home"}},[s("h4",{staticClass:"font-weight-bold tele-text mt-2"},[t._v("Telegram")])])],1),s("b-col",{staticClass:"text-right"},[s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("img",{attrs:{src:a("5d3c"),alt:""}})]),s("div",{staticClass:"dropdown-menu dropdown-menu-right menu"},[s("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar",modifiers:{sidebar:!0}}],staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-gear",{staticClass:"mr-4"}),t._v("Settings")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-person",{staticClass:"mr-4"}),t._v("Contacts")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-telephone",{staticClass:"mr-4"}),t._v("Calls")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-bookmark",{staticClass:"mr-4"}),t._v("Messages")],1),s("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.add-friend",modifiers:{"add-friend":!0}}],staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-person-plus",{staticClass:"mr-4",attrs:{"flip-h":""}}),t._v("Friends")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-question-circle",{staticClass:"mr-4"}),t._v("FAQ")],1)])])])],1),s("div"),s("form",[s("div",{staticClass:"form"},[s("button",[s("b-icon",{attrs:{icon:"search",variant:"secondary"}})],1),s("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search here"}}),t._m(0)])]),t._m(1),s("hr"),t._l(t.friendList,(function(e,a){return s("div",{key:a,staticClass:"list-contact"},[s("div",{staticClass:"pointer form-inline",on:{click:function(a){return t.selectUser(e.name,e.image,e.iduser)}}},[s("img",{staticClass:"pl-2 prof-pic",attrs:{src:""+t.url+e.image,alt:"photo"}}),s("div",{staticClass:"info ml-2 pt-2"},[s("b",[t._v(t._s(e.name))])])]),s("hr")])}))],2)]),s("b-sidebar",{attrs:{id:"sidebar"}},[s("div",{staticClass:"p-4"},[s("div",{staticClass:"text-center"},[s("h4",{staticClass:"tele-text mt-0 mb-3"},[t._v(t._s(t.userDetail.data.username))]),s("img",{staticClass:"prof-pic",attrs:{src:""+t.url+t.userDetail.data.image,alt:""}}),s("div",[s("h4",{staticClass:"mb-0"},[t._v(t._s(t.userDetail.data.name))])]),s("div",[s("p",{staticClass:"text-muted mt-0"},[t._v("@"+t._s(t.userDetail.data.username))])])]),s("div",{staticClass:"text-left"},[s("h4",{staticClass:"font-weight-bold"},[t._v("Account "),s("b-icon-pencil",{directives:[{name:"b-modal",rawName:"v-b-modal.update-prof",modifiers:{"update-prof":!0}}],staticClass:"tele-text text-right"})],1),s("div",[s("p",{staticClass:"text-muted mb-0"},[t._v("Phone number")]),s("p",[t._v(t._s(t.userDetail.data.phonenumber))])]),s("div",[s("p",{staticClass:"text-muted mb-0"},[t._v("Bio")]),s("p",[t._v(t._s(t.userDetail.data.bio))])])]),s("b-modal",{attrs:{id:"update-prof",title:"Edit Profile","hide-footer":""}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.updateProfile(e)}}},[s("div",[s("div",{staticClass:"form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phonenumber,expression:"phonenumber"}],staticClass:"form form-control",attrs:{type:"text",placeholder:"Phone number"},domProps:{value:t.phonenumber},on:{input:function(e){e.target.composing||(t.phonenumber=e.target.value)}}})]),s("div",{staticClass:"form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.bio,expression:"bio"}],staticClass:"form form-control",attrs:{type:"text",placeholder:"Bio"},domProps:{value:t.bio},on:{input:function(e){e.target.composing||(t.bio=e.target.value)}}})]),s("input",{staticClass:"form-control-file form",attrs:{type:"file",id:"exampleFormControlFile1",placeholder:"Upload profile picture"},on:{change:function(e){return t.processFile(e)}}}),s("div",{staticClass:"form"})]),s("div",{staticClass:"text-right"},[s("b-button",{staticClass:"tele-btn-cancel",attrs:{type:"button"},on:{click:function(e){return t.$bvModal.hide("update-prof")}}},[t._v("Close")]),s("b-button",{staticClass:"ml-3 tele-btn",attrs:{type:"submit"}},[t._v("Submit")])],1)])]),s("div",{staticClass:"text-left"},[s("h4",{staticClass:"font-weight-bold mb-2"},[t._v("Settings")]),s("div",{staticClass:"tele-text"},[s("div",[s("p",[s("b-icon-bell",{staticClass:"mr-3",attrs:{scale:"1.5"}}),t._v("Notification and Sounds")],1)]),s("div",[s("p",[s("b-icon-lock",{staticClass:"mr-3",attrs:{scale:"1.5"}}),t._v("Privacy and Security")],1)]),s("div",[s("p",[s("b-icon-graph-up",{staticClass:"mr-3",attrs:{scale:"1.5"}}),t._v("Data and Storage")],1)]),s("div",[s("p",[s("b-icon-chat-left-text",{staticClass:"mr-3",attrs:{scale:"1.5"}}),t._v("Chat Settings")],1)]),s("div",[s("p",[s("b-icon-laptop",{staticClass:"mr-3",attrs:{scale:"1.5"}}),t._v("Devices")],1)]),s("div",{staticClass:"pointer",on:{click:function(e){return t.onLogout()}}},[s("p",[s("b-icon-power",{staticClass:"mr-3",attrs:{scale:"1.5"}}),t._v("Logout")],1)])])])],1)]),s("b-sidebar",{attrs:{id:"add-friend",shadow:""}},[s("div",{staticClass:"px-3 py-2"},[s("h3",{staticClass:"tele-text"},[t._v("Add Friend")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.addFriend(e)}}},[s("div",{staticClass:"form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.friends,expression:"friends"}],staticClass:"form-control",attrs:{type:"text",placeholder:"insert username"},domProps:{value:t.friends},on:{input:function(e){e.target.composing||(t.friends=e.target.value)}}})])])])]),s("b-sidebar",{attrs:{id:"friend-prof",right:"",shadow:""}},[s("div",{staticClass:"p-4"},[s("div",{staticClass:"text-center"},[s("h4",{staticClass:"tele-text mt-0 mb-3"},[t._v(t._s(t.friendDetail.data.username))]),s("img",{staticClass:"prof-pic",attrs:{src:""+t.url+t.friendDetail.data.image,alt:""}}),s("div",[s("h4",{staticClass:"mb-0"},[t._v(t._s(t.friendDetail.data.name))])]),s("div",[s("p",{staticClass:"text-muted mt-0"},[t._v("@"+t._s(t.friendDetail.data.username))])])]),s("div",{staticClass:"text-left"},[s("h4",{staticClass:"font-weight-bold"},[t._v("Account")]),s("div",[s("p",{staticClass:"text-muted mb-0"},[t._v("Phone number")]),s("p",[t._v(t._s(t.friendDetail.data.phonenumber))])]),s("div",[s("p",{staticClass:"text-muted mb-0"},[t._v("Bio")]),s("p",[t._v(t._s(t.friendDetail.data.bio))])])])])]),s("div",{staticClass:"col-lg-9 col-md-9 d-none d-md-block"},[s("div",[null===t.receiver?s("div",[s("p",{staticClass:"text-muted empty-chat"},[t._v("Please select a user to start chatting")])]):s("div",[s("div",{staticClass:"receiver-info form-inline"},[s("img",{directives:[{name:"b-toggle",rawName:"v-b-toggle.friend-prof",modifiers:{"friend-prof":!0}}],staticClass:"m-2 prof-pic",attrs:{src:""+t.url+t.receiverImg,alt:"photo"},on:{click:function(e){return t.friendsDetail()}}}),s("div",{staticClass:"info ml-3"},[s("b",[t._v(t._s(t.receiver))])])]),s("div",{staticClass:"chat-room"},[t._l(t.historyMsg,(function(e,a){return s("div",{key:"a"+a},[e.sender===t.sender?s("div",[s("div",{staticClass:"msg-sent text-right ml-auto col-8 text-break"},[t._v(" "+t._s(e.message)+" ")])]):s("div",{staticClass:"msg-received text-left col-8 text-break"},[t._v(" "+t._s(e.message)+" ")])])})),t._l(t.privateChat,(function(e,a){return s("div",{key:a},[e.sender===t.sender?s("div",[s("div",{staticClass:"msg-sent text-right ml-auto col-8 text-break"},[t._v(" "+t._s(e.message)+" ")])]):s("div",{staticClass:"msg-received text-left col-8 text-break"},[t._v(" "+t._s(e.msg)+" ")])])}))],2),s("div",[s("form",{on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[s("div",{staticClass:"form m-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Type your message here..."},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._m(2),t._m(3),t._m(4)])])])])])]),s("div",[s("div",{staticClass:"container friendlist d-sm-none d-block"},[s("b-row",[s("b-col",[s("router-link",{attrs:{to:"/home"}},[s("h4",{staticClass:"font-weight-bold tele-text mt-2"},[t._v("Telegram")])])],1),s("b-col",{staticClass:"text-right"},[s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("img",{attrs:{src:a("5d3c"),alt:""}})]),s("div",{staticClass:"dropdown-menu dropdown-menu-right menu"},[s("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar",modifiers:{sidebar:!0}}],staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-gear",{staticClass:"mr-4"}),t._v("Settings")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-person",{staticClass:"mr-4"}),t._v("Contacts")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-telephone",{staticClass:"mr-4"}),t._v("Calls")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-bookmark",{staticClass:"mr-4"}),t._v("Messages")],1),s("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.add-friend",modifiers:{"add-friend":!0}}],staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-person-plus",{staticClass:"mr-4",attrs:{"flip-h":""}}),t._v("Friends")],1),s("button",{staticClass:"dropdown-item text-white",attrs:{type:"button"}},[s("b-icon-question-circle",{staticClass:"mr-4"}),t._v("FAQ")],1)])])])],1),s("form",[s("div",{staticClass:"form"},[s("button",[s("b-icon",{attrs:{icon:"search",variant:"secondary"}})],1),s("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Search here"}}),t._m(5)])]),t._m(6),s("hr"),t._l(t.friendList,(function(e,a){return s("div",{key:a,staticClass:"list-contact"},[s("div",{staticClass:"form-inline"},[s("img",{directives:[{name:"b-toggle",rawName:"v-b-toggle.friend-prof",modifiers:{"friend-prof":!0}}],staticClass:"pl-2 prof-pic",attrs:{src:""+t.url+e.image,alt:"photo"},on:{click:function(e){return t.friendsDetail()}}}),s("div",{directives:[{name:"b-modal",rawName:"v-b-modal.mobile-chat",modifiers:{"mobile-chat":!0}}],staticClass:"pointer info ml-2 pt-2",on:{click:function(a){return t.selectUser(e.name,e.image,e.iduser)}}},[s("b",[t._v(t._s(e.name))])])]),s("hr")])}))],2),s("b-modal",{attrs:{id:"mobile-chat",centered:"","hide-footer":""}},[s("div",{staticClass:"receiver-info form-inline"},[s("img",{staticClass:"m-2 prof-pic",attrs:{src:""+t.url+t.receiverImg,alt:"photo"}}),s("div",{staticClass:"info ml-3"},[s("b",[t._v(t._s(t.receiver))])])]),s("div",{staticClass:"chat-room"},[t._l(t.historyMsg,(function(e,a){return s("div",{key:"a"+a},[e.sender===t.sender?s("div",[s("div",{staticClass:"msg-sent text-right ml-auto col-8 text-break"},[t._v(" "+t._s(e.message)+" ")])]):s("div",{staticClass:"msg-received text-left col-8 text-break"},[t._v(" "+t._s(e.message)+" ")])])})),t._l(t.privateChat,(function(e,a){return s("div",{key:a},[e.sender===t.sender?s("div",[s("div",{staticClass:"msg-sent text-right ml-auto col-8 text-break"},[t._v(" "+t._s(e.message)+" ")])]):s("div",{staticClass:"msg-received text-left col-8 text-break"},[t._v(" "+t._s(e.msg)+" ")])])}))],2),s("div",[s("form",{on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[s("div",{staticClass:"form m-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Type your message here..."},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("button",[s("img",{attrs:{src:a("860e"),alt:""}})]),s("button",[s("img",{attrs:{src:a("aa48"),alt:""}})]),s("button",[s("img",{attrs:{src:a("aec8"),alt:""}})])])])])])],1)],1)])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",[s("img",{attrs:{src:a("860e"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mx-auto"},[a("button",{staticClass:"btn chat-category mx-auto"},[t._v(" All ")]),a("button",{staticClass:"btn chat-category mx-auto"},[t._v(" Important")]),a("button",{staticClass:"btn chat-category mx-auto"},[t._v(" Unread ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",[s("img",{attrs:{src:a("860e"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",[s("img",{attrs:{src:a("aa48"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",[s("img",{attrs:{src:a("aec8"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",[s("img",{attrs:{src:a("860e"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mx-auto"},[a("button",{staticClass:"btn chat-category mx-auto"},[t._v(" All ")]),a("button",{staticClass:"btn chat-category mx-auto"},[t._v(" Important")]),a("button",{staticClass:"btn chat-category mx-auto"},[t._v(" Unread ")])])}],f=(a("99af"),a("4de4"),a("2909")),p=(a("96cf"),a("1da1")),g=a("5530"),v=a("8055"),h=a.n(v),b=a("3d20"),A=a.n(b),C=a("1b08"),w=a("2f62"),_={name:"Home",data:function(){return{sender:localStorage.getItem("name"),username:localStorage.getItem("username"),socket:h()("".concat(C["URL_SOCKET"])),friendList:[],url:C["URL_SOCKET"],message:"",receiver:null,receiverImg:null,receiverId:null,listMessage:[],historyMsg:[],privateChat:[],receivedMsg:null,image:null,name:"",phonenumber:"",bio:"",friends:""}},computed:Object(g["a"])({},Object(w["c"])({userDetail:"user/userDetail",friendDetail:"user/friendDetail"})),methods:Object(g["a"])(Object(g["a"])({processFile:function(t){this.image=t.target.files[0]}},Object(w["b"])({actionGetDetail:"user/getDetail",actionFriendsDetail:"user/getFriendsDetail",actionUpdate:"user/update",actionAddFriends:"user/addFriends",actionLogout:"user/onLogout"})),{},{onLogout:function(){this.actionLogout(),window.location="/login"},selectUser:function(t,e,a){var s=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s.receiver=t,s.receiverImg=e,s.receiverId=a,s.setPrivateChat(),i.next=6,s.socket.emit("get-history",{sender:s.sender,receiver:s.receiver});case 6:s.getHistoryMessage();case 7:case"end":return i.stop()}}),i)})))()},friendsDetail:function(){var t=this.receiverId;this.actionFriendsDetail(t)},sendMessage:function(){var t={sender:this.sender,receiver:this.receiver,message:this.message};this.listMessage=[].concat(Object(f["a"])(this.listMessage),[t]),this.socket.emit("send-message",{sender:this.sender,receiver:this.receiver,message:this.message}),this.message="",this.setPrivateChat()},getHistoryMessage:function(){var t=this;this.socket.on("historyMessage",(function(e){t.historyMsg=e}))},setPrivateChat:function(){var t=this,e=this.listMessage.filter((function(e){return null===t.receiver?e.sender===t.receiver||e.sender===t.sender:e.receiver===t.receiver||e.sender===t.receiver}));this.privateChat=e},updateProfile:function(){var t=null===this.image?this.userDetail.data.image:this.image,e=null===this.phonenumber?this.userDetail.data.phonenumber:this.phonenumber,a=null===this.bio?this.userDetail.data.bio:this.bio,s=new FormData;s.append("image",t),s.append("phonenumber",e),s.append("bio",a),this.actionUpdate(s).then((function(t){console.log(t),"Image size is too big! Please upload another one with size <5mb"===t?A.a.fire({icon:"error",title:"Image size is too big!",text:"Please upload another one with size <5mb"}):"Image type must be JPG or JPEG"===t?A.a.fire({icon:"error",title:"Incorrect file type!",text:"Image type must be JPG or JPEG"}):(A.a.fire({icon:"success",title:"Your profile is updated!",text:"You have successfully updated your profile"}),window.location="/home")})).catch((function(t){console.log(t),A.a.fire({icon:"error",title:"Something went wrong"})}))},addFriend:function(){var t=this,e={users:this.username,friend:this.friends};this.actionAddFriends(e).then((function(e){"Error: Cannot add or update a child row: a foreign key constraint fails (`telegram`.`friends`, CONSTRAINT `friends_ibfk_2` FOREIGN KEY (`friend`) REFERENCES `users` (`username`))"===e?A.a.fire({icon:"warning",title:"Username does not exist",text:"Please check the username again!"}):"Friend is added"===e?(A.a.fire({icon:"success",title:"Add Friend Success!",text:"".concat(t.friends," is added to your friends list")}),window.location="/home"):A.a.fire({icon:"Error",title:"Something Wrong"})})).catch((function(t){console.log(t)}))}}),mounted:function(){var t=this;this.actionGetDetail(),this.socket.emit("get-all-friends",{username:this.username}),this.socket.on("friendList",(function(e){t.friendList=e})),this.socket.emit("join-room",this.sender),this.socket.on("private-message",(function(e){t.listMessage=[].concat(Object(f["a"])(t.listMessage),[e]),null!==t.receiver&&t.setPrivateChat()}))}},x=_,k=(a("fdcd"),Object(n["a"])(x,d,m,!1,null,"154db35c",null)),y=k.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row d-flex justify-content-center main-page"},[a("div",{staticClass:"col-lg-4 col-11  login p-4"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("h3",{staticClass:"text-center",staticStyle:{color:"#7E98DF"}},[t._v("Login")]),a("p",{staticClass:"text-left mt-4 mb-4"},[t._v("Hi, Welcome back!")]),a("div",{staticClass:"md-form"},[a("label",{attrs:{for:"text"}},[t._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"md-form"},[a("label",{attrs:{for:"password"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"form-group text-right"},[a("router-link",{attrs:{to:"forgot-password"}},[t._v("Forgot Password ?")])],1),t._m(0),t._m(1),t._m(2),a("div",{staticClass:"form-group text-center"},[a("p",[t._v("Donâ€™t have an account? "),a("router-link",{staticStyle:{color:"#7E98DF"},attrs:{to:"/register"}},[t._v("Sign Up")])],1)])])])])])},S=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn btn-block login-btn",attrs:{type:"submit"}},[t._v("Login")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 col-4"},[a("hr",{staticClass:"line"})]),a("div",{staticClass:"col-lg-4 col-4 text-center mt-1"},[a("p",[t._v("Login with")])]),a("div",{staticClass:"col-lg-4 col-4"},[a("hr",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn btn-block btn-google"},[t._v(" Google ")])])}],I={data:function(){return{username:"",password:"",socket:h()("".concat(C["URL_SOCKET"]))}},methods:Object(g["a"])(Object(g["a"])({},Object(w["b"])({onLogin:"user/onLogin"})),{},{login:function(){var t=this,e={username:this.username,password:this.password};this.onLogin(e).then((function(e){"Need Activation"===e?(localStorage.removeItem("iduser"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("name"),localStorage.removeItem("username"),t.needActivation()):"Login Success"!==e?(localStorage.removeItem("iduser"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("name"),localStorage.removeItem("username"),t.failedLogin()):(t.socket.emit("notification",t.username),window.location="/home")}))},failedLogin:function(){A.a.fire({icon:"error",title:"Login Failed",text:"Please check your username or password!"})},needActivation:function(){A.a.fire({icon:"warning",title:"Unverified Account",text:"Please check your email to verify your account!"})}})},D=I,U=(a("cafa"),Object(n["a"])(D,E,S,!1,null,"7ed2a440",null)),R=U.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("img",{staticClass:"logo",attrs:{src:a("9ce8"),alt:""}}),t._v(" "),s("br"),s("router-link",{attrs:{to:"/register"}},[s("button",{staticClass:"btn col-lg-4 mt-3 reg-btn"},[t._v("Register")])]),s("br"),s("router-link",{attrs:{to:"/login"}},[s("button",{staticClass:"btn col-lg-4 mt-3 login-btn"},[t._v("Login")])])],1)},P=[],L=(a("2123"),{}),T=Object(n["a"])(L,B,P,!1,null,"5813d15a",null),N=T.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row d-flex justify-content-center main-page"},[s("div",{staticClass:"col-lg-4 col-11  register p-4"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.register()}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-1 col-1"},[s("router-link",{attrs:{to:"/login"}},[s("button",{staticClass:"btn"},[s("img",{attrs:{src:a("1faf"),alt:""}})])])],1),t._m(0)]),s("p",{staticClass:"text-left  mt-4 mb-4"},[t._v("Let's create your account!")]),s("div",{staticClass:"md-form"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),s("div",{staticClass:"md-form"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"md-form"},[s("label",{attrs:{for:"password1"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password1"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._m(1),t._m(2),t._m(3)])])])])},M=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-11 col-11"},[a("h3",{staticClass:"text-center",staticStyle:{color:"#7E98DF","margin-left":"-30px"}},[t._v("Register")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group text-center mt-5"},[a("button",{staticClass:"btn btn-block btn-register",attrs:{type:"submit"}},[t._v("Register")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-4 col-4"},[a("hr",{staticClass:"line"})]),a("div",{staticClass:"col-lg-4 col-4 text-center mt-1"},[a("p",[t._v("Register with")])]),a("div",{staticClass:"col-lg-4 col-4"},[a("hr",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn btn-block btn-google",attrs:{type:"submit"}},[t._v(" Google ")])])}],j=(a("b0c0"),{data:function(){return{name:"",email:"",password:"",socket:h()("".concat(C["URL_SOCKET"]))}},methods:Object(g["a"])(Object(g["a"])({},Object(w["b"])({onRegister:"user/onRegister"})),{},{register:function(){var t={name:this.name,email:this.email,password:this.password};this.onRegister(t).then((function(t){"Success Registration, Please activate your email"===t?(A.a.fire({icon:"success",title:"You are registered!",text:"Please check your email to activate your account!"}),window.location="/login"):A.a.fire({icon:"error",title:"Duplicate Email",text:"Please use different email as this one is already registered"})})).catch((function(t){console.log(t)}))}})}),Y=j,Q=(a("2cfd"),Object(n["a"])(Y,O,M,!1,null,null,null)),F=Q.exports,J=a("bc3a"),H=a.n(J),K=function(){return{all:{data:[],isLoading:!1},friend:{data:[]},token:localStorage.getItem("token")||null}},X={isLogin:function(t){return null!==t.token},userDetail:function(t){return t.all},friendDetail:function(t){return t.friend}},G={SET_ALL_DATA:function(t,e){t.all.data=e},SET_FRIENDS_DATA:function(t,e){t.friend.data=e}},z={onRegister:function(t,e){return new Promise((function(t,a){H.a.post("".concat(C["URL"],"/users/register"),{name:e.name,email:e.email,password:e.password}).then((function(e){t(e.data.message)})).catch((function(t){a(new Error(t))}))}))},onLogin:function(t,e){return new Promise((function(t,a){H.a.post("".concat(C["URL"],"/users/login"),{username:e.username,password:e.password}).then((function(e){t(e.data.message),localStorage.setItem("iduser",e.data.data.iduser),localStorage.setItem("token",e.data.data.token),localStorage.setItem("refreshToken",e.data.data.refreshToken),localStorage.setItem("name",e.data.data.name),localStorage.setItem("username",e.data.data.username)})).catch((function(t){console.log(t)}))}))},onLogout:function(t){return new Promise((function(t){localStorage.removeItem("iduser"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("name"),localStorage.removeItem("username"),t("Logout success")}))},getDetail:function(t,e){var a=localStorage.getItem("iduser");return new Promise((function(e,s){H.a.get("".concat(C["URL"],"/users/getdetail/").concat(a)).then((function(e){t.commit("SET_ALL_DATA",e.data.data[0])})).catch((function(t){console.log(t)}))}))},getFriendsDetail:function(t,e){return new Promise((function(a,s){H.a.get("".concat(C["URL"],"/users/getdetail/").concat(e)).then((function(e){t.commit("SET_FRIENDS_DATA",e.data.data[0])})).catch((function(t){console.log(t)}))}))},update:function(t,e){var a=localStorage.getItem("iduser");return new Promise((function(t,s){H.a.patch("".concat(C["URL"],"/users/update/").concat(a),e).then((function(e){console.log(e.data.message),t(e.data.message)})).catch((function(t){s(t)}))}))},addFriends:function(t,e){return new Promise((function(t,a){H.a.post("".concat(C["URL"],"/friends/addfriends"),e).then((function(e){t(e.data.message)})).catch((function(t){a(t)}))}))}},V={namespaced:!0,state:K,getters:X,mutations:G,actions:z};s["default"].use(w["a"]);var Z=new w["a"].Store({modules:{user:V}}),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("HereMap",{attrs:{center:t.center}})],1)},q=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"map"}},[a("div",{ref:"hereMap",staticStyle:{height:"600px",width:"100%"},attrs:{id:"mapContainer"}})])},tt=[],et=(a("d81d"),{name:"HereMap",props:{center:Object},data:function(){return{platform:null,apikey:"eTkvMZBgvLBhS0UZvwtl_1seMMqr80_azcXvdrUKjmU"}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=new window.H.service.Platform({apikey:t.apikey}),t.platform=a,t.initializeHereMap();case 3:case"end":return e.stop()}}),e)})))()},methods:{initializeHereMap:function(){var t=this.$refs.hereMap,e=window.H,a=this.platform.createDefaultLayers(),s=new e.Map(t,a.vector.normal.map,{zoom:10,center:this.center});addEventListener("resize",(function(){return s.getViewPort().resize()})),e.mapevents.Behavior(new e.mapevents.MapEvents(s)),e.ui.UI.createDefault(s,a)}}}),at=et,st=(a("4af7"),Object(n["a"])(at,$,tt,!1,null,"06c77c7a",null)),it=st.exports,rt={name:"app",components:{HereMap:it},data:function(){return{center:{lat:40.73061,lng:-73.935242}}}},nt=rt,ot=(a("3c61"),Object(n["a"])(nt,W,q,!1,null,null,null)),ct=ot.exports;s["default"].use(u["a"]);var lt=[{path:"/home",name:"Home",component:y,meta:{requiresAuth:!0}},{path:"/",name:"Splash",component:N},{path:"/login",name:"Login",component:R},{path:"/register",name:"Register",component:F},{path:"/map",name:"Map",component:ct,meta:{requiresAuth:!0}}],ut=new u["a"]({mode:"history",base:"/",routes:lt});ut.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.requiresAuth}))?Z.getters["user/isLogin"]?a():a({path:"/login"}):a()}));var dt=ut,mt=a("5f5b"),ft=a("b1e0");a("f9e3"),a("2dd8");H.a.defaults.headers={token:localStorage.getItem("token")},H.a.interceptors.response.use((function(t){return"Token Expired! Please log in again"===t.data.message?new Promise((function(t,e){H.a.post("".concat(C["URL"],"/users/refreshToken"),{refreshToken:localStorage.getItem("refreshToken")}).then((function(e){t(),localStorage.setItem("token",e.data.data.token),window.location="/home"})).catch((function(t){return e(t.message)}))})):t})),s["default"].use(mt["a"]),s["default"].use(ft["a"]),s["default"].config.productionTip=!1,new s["default"]({router:dt,store:Z,render:function(t){return t(l)}}).$mount("#app")},"5d3c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAATCAYAAACUef2IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADJSURBVHgB7dTBCcIwFAbgP2kEjx2h3aBuUCfQFTx6snfBxg3qQcRTcQJX6AhukLpBvVWw7xkFwZNtId765ZLACwmP957YHK8piBII+HBFQCswabtxLZEMFHCMGcX7r+uDieHQaIwLBh9C58ZH/Yi6X1GlXoZlaxTfkbNQc3RXJrmZZIuw+hUkbWnE6Cfw6/ZmetXxDj0Q86lLKgb/J/TeROxhBUca0E2xzBR5ONtzAEekXSQwk2CHA/6LkoSpTUVKcPOABCrRYPsEcIg9DP9YSqAAAAAASUVORK5CYII="},8453:function(t,e,a){},"85ec":function(t,e,a){},"860e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABuSURBVHgB7dTBDYAgEATAPTqhOq0CD6rQ6oyNgEKC8bkaTXzcfuDBzos7AZmwbBNKVgg0DT4yHQc2FW4nlK3w+IMYbvhPcDkn73UZ6j6Ba0rDQe2J+3iOwr4N81r6PY2e6tlXNNzwa/okH5PHVnYAjCCVaixAgQAAAABJRU5ErkJggg=="},"9ce8":function(t,e,a){t.exports=a.p+"img/logocolor.cc32ce73.png"},aa48:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAXCAYAAAARIY8tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI8SURBVHgBtVVNbtNAFP7eOJQiAcoNsKnYpyegPUF7g6YrarFI2KEKWtdEiB3pAqUgpCYngBs0vYE5ALJXrLMAUbXpTN/Y+evYU6d/n5TYnvfme29mvveGcAWah3H1yX9ZhxBrBLjIfoDCgAiRVOe9Mzj9T76X2DjIRvz0FA1INNmjihIooHumsFcUKBdg+0tcqzj4Mcl2fiSnCqtmEMqRCxzNk3UhCIPhEKsfX3vRdGiEt53YXSAmv37mJi6tRIxHHxB274Bcw31IOBx/pAHedeIVXkq9wDnhNUZWqsyWmMN86CuacxKAJbeRn4tuuOV54StvGZD7Bfa2tmkfKNUz7c6IMwugsG46sMaPp+/ip2k/lzieZiz7pl1Rxim2v8W1ItUIcjZ0PYxW2DDtJPBSP1MfctaQi4Bq6/ufZ6T3SmTqQYHTIGOzyLbELllNFVyFsnqYo16EdEZZ3BMqC/+QyEfljiy9PkH+yr6E3nO3bM7fRURpJe8exEdau3Z2uRf6S8Hs0E4nDpAVpw0RS3g5lalSU8kVIDHJNULf02OJbRJzprWTBhAnaE8UkcdNzihxeEv1y6TZvf8aN7ngPhd5636v1LDX8l/0te4fnwxrRJUGT163ZL/5wfe6lwJo7Bz8bvN6GrgFJLeV1tZSc/ydu3BuE0RyT2r5z+uzY8J0CnV0vv5wHfD5ce95Y5JrkG1OwBeQhGIpku45ro2Y//fFItrBplcoBmuAWaT3hQIfrKxmvCJxJKJg5mq04QLw6NEw7R8IfQAAAABJRU5ErkJggg=="},aec8:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEISURBVHgBzZStbgJBFIXPTKFp2iVsW4FG1LRNJatqK/sKrWwV8AL8PgDgwMHjsJIABggaAVmxEAJkLjsIBJkh2WUEn5q5k3NyfzKXIaDQmhYhkAODjbAQPGJoV//SeVZsTWtEgdGlkChzEviFCTjP8kilqSDYHAYxahY795h5s5B5fYCdiGE236I79NEbrcKbfbzc48tJHu+p5zi+Px9xd8vgDpZKjbZMJ8hKHU/oJHqz1FNcGU9aNwht5vk7ZXy22CK0mdtX96Xb93US/QDcYHLrjYDzbh1KlpnKxvfGEaYpkcJz4lOu9wdwuY9gAgZPZtaAAQSJDpOHQnNSB/GfqJtWJlT5T5f2K71QcjIcJWQAAAAASUVORK5CYII="},c4eb:function(t,e,a){},cafa:function(t,e,a){"use strict";var s=a("4f44"),i=a.n(s);i.a},d6c4:function(t,e,a){},e314:function(t,e,a){},eae3:function(t,e,a){},fdcd:function(t,e,a){"use strict";var s=a("c4eb"),i=a.n(s);i.a}});
//# sourceMappingURL=app.e1ba0fec.js.map